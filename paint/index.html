<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Image Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body {font-family: 'Inter', sans-serif; margin: 0; padding: 20px; height: 100vh; display: grid; grid-template-rows: auto 1fr auto;}
        #model {position: absolute; top: 20px; left: 20px; padding: 8px 12px; border-radius: 6px; border: 1px solid #ccc;}
        #imageContainer {margin: 60px 0 20px; text-align: center; min-height: 300px; display: flex; align-items: center; justify-content: center;}
        img {max-width: 90%; max-height: 60vh; border-radius: 8px;}
        .input-area {display: flex; gap: 10px; padding: 10px 0;}
        #prompt {flex: 1; padding: 12px; border: 1px solid #ccc; border-radius: 6px;}
        #generate, #download {padding: 12px 24px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer;}
        #download {background: #10b981; margin-top: 10px; display: none;}
    </style>
</head>
<body>
    <select id="model">
        <option value="gpt-image-1.5">GPT-Image 1.5</option>
        <option value="gpt-image-1-mini">GPT-Image 1 Mini</option>
        <option value="gpt-image-1">GPT-Image 1</option>
        <option value="dall-e-3" selected>DALL-E 3</option>
        <option value="dall-e-2">DALL-E 2</option>
    </select>
    
    <div id="imageContainer">等待生成图像...</div>
    
    <div class="input-area">
        <input type="text" id="prompt" placeholder="输入图像描述..." value="A futuristic cityscape at night">
        <button id="generate">生成</button>
    </div>
    
    <button id="download">下载图像</button>

    <script src="https://js.puter.com/v2/"></script>
    <script>
        document.getElementById('generate').onclick = async function() {
            const prompt = document.getElementById('prompt').value;
            const model = document.getElementById('model').value;
            const imageContainer = document.getElementById('imageContainer');
            const downloadBtn = document.getElementById('download');
            
            if (!prompt) return alert('请输入描述词');
            
            imageContainer.innerHTML = '生成中...';
            downloadBtn.style.display = 'none';
            
            try {
                const imageElement = await puter.ai.txt2img(prompt, { model: model });
                imageContainer.innerHTML = '';
                imageContainer.appendChild(imageElement);
                downloadBtn.style.display = 'block';
                
                downloadBtn.onclick = function() {
                    const link = document.createElement('a');
                    link.href = imageElement.src;
                    link.download = `ai-image-${Date.now()}.png`;
                    link.click();
                };
            } catch (error) {
                imageContainer.innerHTML = '生成失败，请重试';
                console.error(error);
            }
        };
    </script>
</body>
</html>
