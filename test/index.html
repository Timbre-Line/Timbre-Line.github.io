<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>OpenRouter 模型测试器</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        #results { margin-top: 20px; }
        .model { padding: 8px; border-bottom: 1px solid #ccc; }
        .pass { color: green; }
        .fail { color: red; }
        .testing { color: blue; }
        #progress { margin-top: 10px; }
    </style>
</head>
<body>
    <h1>OpenRouter OpenAI 模型测试器</h1>
    <p>测试通过 Puter AI SDK 访问 OpenRouter 上的 OpenAI 模型。每个模型测试超时：30秒。</p>
    <button id="start">开始顺序测试</button>
    <div id="progress"></div>
    <div id="results"></div>

    <script src="https://js.puter.com/v2/"></script>
    <script>
        const models = [
            "openrouter:openai/chatgpt-4o-latest",
            "openrouter:openai/gpt-3.5-turbo",
            "openrouter:openai/gpt-3.5-turbo-16k",
            "openrouter:openai/gpt-3.5-turbo-instruct",
            "openrouter:openai/gpt-4",
            "openrouter:openai/gpt-4-0314",
            "openrouter:openai/gpt-4-1106-preview",
            "openrouter:openai/gpt-4-turbo",
            "openrouter:openai/gpt-4-turbo-preview",
            "openrouter:openai/gpt-4.1",
            "openrouter:openai/gpt-4.1-mini",
            "openrouter:openai/gpt-4.1-nano",
            "openrouter:openai/gpt-4o",
            "openrouter:openai/gpt-4o-2024-05-13",
            "openrouter:openai/gpt-4o-2024-08-06",
            "openrouter:openai/gpt-4o-2024-11-20",
            "openrouter:openai/gpt-4o-mini",
            "openrouter:openai/gpt-4o-mini-2024-07-18",
            "openrouter:openai/gpt-4o-mini-search-preview",
            "openrouter:openai/gpt-4o-search-preview",
            "openrouter:openai/gpt-4o:extended",
            "openrouter:openai/gpt-5",
            "openrouter:openai/gpt-5-chat",
            "openrouter:openai/gpt-5-mini",
            "openrouter:openai/gpt-5-nano",
            "openrouter:openai/gpt-5-pro",
            "openrouter:openai/gpt-5.1",
            "openrouter:openai/gpt-5.1-chat",
            "openrouter:openai/gpt-5.2",
            "openrouter:openai/gpt-5.2-chat",
            "openrouter:openai/gpt-5.2-pro",
            "openrouter:openai/o1",
            "openrouter:openai/o1-mini",
            "openrouter:openai/o1-mini-2024-09-12",
            "openrouter:openai/o1-pro",
            "openrouter:openai/o3",
            "openrouter:openai/o3-deep-research",
            "openrouter:openai/o3-mini",
            "openrouter:openai/o3-mini-high",
            "openrouter:openai/o3-pro",
            "openrouter:openai/o4-mini",
            "openrouter:openai/o4-mini-deep-research",
            "openrouter:openai/o4-mini-high"
        ];

        const resultsDiv = document.getElementById('results');
        const progressDiv = document.getElementById('progress');
        const startBtn = document.getElementById('start');

        function addResult(model, status, error = '') {
            const div = document.createElement('div');
            div.className = 'model';
            div.innerHTML = `<strong>${model}</strong>: <span class="${status}">${status.toUpperCase()}</span> ${error ? `<br><small>${error}</small>` : ''}`;
            resultsDiv.appendChild(div);
        }

        function updateProgress(text) {
            progressDiv.textContent = text;
        }

        async function testModel(model) {
            updateProgress(`正在测试 ${model}...`);
            const timeout = new Promise((_, reject) =>
                setTimeout(() => reject(new Error('30秒后超时')), 30000)
            );
            try {
                const response = await Promise.race([
                    puter.ai.chat('Hello', { model }),
                    timeout
                ]);
                return { pass: true, error: '' };
            } catch (err) {
                return { pass: false, error: err.message };
            }
        }

        async function runTests() {
            startBtn.disabled = true;
            resultsDiv.innerHTML = '';
            for (const model of models) {
                addResult(model, 'testing');
                const result = await testModel(model);
                const lastDiv = resultsDiv.lastChild;
                if (lastDiv) {
                    lastDiv.innerHTML = `<strong>${model}</strong>: <span class="${result.pass ? 'pass' : 'fail'}">${result.pass ? '通过' : '失败'}</span> ${result.error ? `<br><small>${result.error}</small>` : ''}`;
                }
            }
            updateProgress('所有测试完成。');
            startBtn.disabled = false;
        }

        startBtn.addEventListener('click', runTests);
    </script>
</body>
</html>
