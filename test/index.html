<html>
<body>
    <div>
        <button onclick="finalDebug()">æœ€ç»ˆæ¨¡å‹æ’æŸ¥æµ‹è¯•</button>
    </div>
    <div id="debugOutput" style="margin-top:20px; padding:15px; border:1px solid #ccc; background:#f9f9f9; white-space: pre-wrap; font-family: monospace;"></div>

    <script src="https://js.puter.com/v2/"></script>
    <script>
        async function finalDebug() {
            const outputDiv = document.getElementById('debugOutput');
            outputDiv.innerHTML = 'ğŸ” å¼€å§‹æœ€ç»ˆæ’æŸ¥...\n\n';

            // å…³é”®ï¼šå…ˆè·å–å¯ç”¨æ¨¡å‹åˆ—è¡¨
            outputDiv.innerHTML += '=== æ­¥éª¤1: è·å–Puteræ”¯æŒçš„æ¨¡å‹åˆ—è¡¨ ===\n';
            try {
                // å°è¯•è°ƒç”¨å¯èƒ½å­˜åœ¨çš„æ¨¡å‹åˆ—è¡¨API
                const models = await puter.ai.models.list();
                outputDiv.innerHTML += `âœ… è·å–åˆ°æ¨¡å‹åˆ—è¡¨:\n${JSON.stringify(models, null, 2)}\n\n`;
                
                // æ£€æŸ¥åˆ—è¡¨ä¸­æ˜¯å¦æœ‰å­—èŠ‚è·³åŠ¨ç›¸å…³æ¨¡å‹
                const byteDanceModels = models.filter(m => 
                    m.id && (m.id.includes('byte') || m.id.includes('seed') || m.id.includes('dream'))
                );
                if (byteDanceModels.length > 0) {
                    outputDiv.innerHTML += `ğŸ¯ æ‰¾åˆ°å­—èŠ‚è·³åŠ¨ç›¸å…³æ¨¡å‹:\n${JSON.stringify(byteDanceModels, null, 2)}\n`;
                } else {
                    outputDiv.innerHTML += 'âš ï¸ æ¨¡å‹åˆ—è¡¨ä¸­æœªæ‰¾åˆ°å­—èŠ‚è·³åŠ¨ç›¸å…³æ¨¡å‹\n';
                }
            } catch (e) {
                outputDiv.innerHTML += `âŒ æ— æ³•è·å–æ¨¡å‹åˆ—è¡¨: ${e.message}\n`;
            }

            // æµ‹è¯•å…¶ä»–å·²çŸ¥å¯å·¥ä½œçš„å›¾åƒæ¨¡å‹ä½œä¸ºå¯¹ç…§ç»„
            outputDiv.innerHTML += '\n=== æ­¥éª¤2: æµ‹è¯•å…¶ä»–å›¾åƒæ¨¡å‹ä½œä¸ºå¯¹ç…§ ===\n';
            const testModels = [
                'openai/dall-e-3',  // OpenAIå›¾åƒæ¨¡å‹
                'stabilityai/stable-diffusion-3',  // çŸ¥åå¼€æºå›¾åƒæ¨¡å‹
                'anthropic/claude-3-haiku'  // æ–‡æœ¬æ¨¡å‹ä½œä¸ºå¯¹ç…§ç»„
            ];

            for (const model of testModels) {
                outputDiv.innerHTML += `\næµ‹è¯•æ¨¡å‹: ${model}\n`;
                try {
                    const response = await puter.ai.chat({
                        model: `openrouter:${model}`,
                        messages: [{ role: 'user', content: 'Say "Hello" in one word.' }],
                        stream: false
                    });
                    outputDiv.innerHTML += `âœ… æˆåŠŸ! å“åº”: ${JSON.stringify(response?.choices?.[0]?.message?.content || response)}\n`;
                } catch (error) {
                    outputDiv.innerHTML += `âŒ å¤±è´¥: ${error.message || 'undefined error'}\n`;
                }
            }

            // æœ€åæµ‹è¯•å¯èƒ½çš„æ­£ç¡®æ¨¡å‹åç§°å˜ä½“
            outputDiv.innerHTML += '\n=== æ­¥éª¤3: æµ‹è¯•æ¨¡å‹åç§°å˜ä½“ ===\n';
            const modelVariants = [
                'bytedance/seedream-4.5',
                'seedream-4.5',
                'seedream',
                'bytedance-seed/seedream-4.5-latest',
                'openrouter:bytedance/seedream-4.5'
            ];

            for (const variant of modelVariants) {
                outputDiv.innerHTML += `\næµ‹è¯•å˜ä½“: ${variant}\n`;
                try {
                    const response = await puter.ai.chat({
                        model: variant,
                        messages: [{ role: 'user', content: 'Test' }],
                        stream: false,
                        max_tokens: 5
                    });
                    outputDiv.innerHTML += `âœ… å¯èƒ½æ‰¾åˆ°äº†! å“åº”: ${JSON.stringify(response)}\n`;
                } catch (error) {
                    outputDiv.innerHTML += `âŒ ${error.message || 'å¤±è´¥'}\n`;
                }
            }
        }
    </script>
</body>
</html>
