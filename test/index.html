<html>
<body>
    <div>
        <button onclick="testAsTextModel()">æµ‹è¯•ï¼šä½œä¸ºæ–‡æœ¬æ¨¡å‹è°ƒç”¨</button>
    </div>
    <div id="testOutput" style="margin-top:20px; padding:15px; border:1px solid #ccc; background:#f9f9f9; white-space: pre-wrap; font-family: monospace;"></div>

    <script src="https://js.puter.com/v2/"></script>
    <script>
        async function testAsTextModel() {
            const outputDiv = document.getElementById('testOutput');
            outputDiv.innerHTML = 'ğŸ§ª å¼€å§‹æµ‹è¯•æ¨¡å‹åœ¨æ–‡æœ¬ç”Ÿæˆæ¨¡å¼ä¸‹çš„è¡Œä¸º...\n\n';

            // æµ‹è¯•ç”¨ä¾‹1ï¼šç›´æ¥ç”Ÿæˆå›¾åƒçš„Promptï¼ˆæœ€å¯èƒ½è§¦å‘å…¶â€œå›¾åƒæ¨¡å‹â€æœ¬è´¨ï¼‰
            outputDiv.innerHTML += '=== æµ‹è¯•ç”¨ä¾‹ 1: ç›´æ¥å›¾åƒç”ŸæˆæŒ‡ä»¤ ===\n';
            await makeChatRequest('Generate an image of a cyberpunk cat.', outputDiv);

            // æµ‹è¯•ç”¨ä¾‹2ï¼šæè¿°å›¾åƒçš„Promptï¼ˆæµ‹è¯•å…¶å¤šæ¨¡æ€ç†è§£èƒ½åŠ›ï¼‰
            outputDiv.innerHTML += '\n\n=== æµ‹è¯•ç”¨ä¾‹ 2: æè¿°å›¾åƒå†…å®¹ ===\n';
            await makeChatRequest('Describe the visual details of a sunset over a mountain lake in one paragraph.', outputDiv);

            // æµ‹è¯•ç”¨ä¾‹3ï¼šçº¯æ–‡æœ¬ä»»åŠ¡ï¼ˆæµ‹è¯•å…¶åŸºç¡€å¯¹è¯èƒ½åŠ›ï¼‰
            outputDiv.innerHTML += '\n\n=== æµ‹è¯•ç”¨ä¾‹ 3: çº¯æ–‡æœ¬ä»»åŠ¡ ===\n';
            await makeChatRequest('Write a short haiku about technology.', outputDiv);
        }

        async function makeChatRequest(prompt, outputDiv) {
            try {
                outputDiv.innerHTML += `ğŸ“¤ å‘é€: "${prompt}"\n`;
                
                const response = await puter.ai.chat({
                    model: 'openrouter:bytedance-seed/seedream-4.5',
                    messages: [{ role: 'user', content: prompt }],
                    stream: false // éæµå¼ï¼Œæ–¹ä¾¿æŸ¥çœ‹å®Œæ•´å¯¹è±¡
                });

                outputDiv.innerHTML += `âœ… æ”¶åˆ°å“åº” (å®Œæ•´ç»“æ„):\n${JSON.stringify(response, null, 2)}\n`;
                outputDiv.innerHTML += `---\nğŸ“„ æå–çš„æ–‡æœ¬å†…å®¹:\n${response?.choices?.[0]?.message?.content || '(æ— æ–‡æœ¬å†…å®¹)'}\n`;
                outputDiv.innerHTML += '---\n';

            } catch (error) {
                outputDiv.innerHTML += `âŒ è¯·æ±‚å¤±è´¥: ${error.message}\n`;
            }
        }
    </script>
</body>
</html>
