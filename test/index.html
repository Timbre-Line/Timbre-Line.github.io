<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>OpenRouter OpenAI oç³»åˆ—æ¨¡å‹å…¨é¢æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1000px; margin: 0 auto; padding: 20px; }
        .model-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .model-card { padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        .available { background: #d4edda; border-color: #c3e6cb; }
        .unavailable { background: #f8d7da; border-color: #f5c6cb; }
        .testing { background: #fff3cd; border-color: #ffeaa7; }
        h4 { margin: 15px 0 10px 0; color: #333; }
        .summary { background: #e7f3ff; padding: 15px; border-radius: 5px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>OpenRouter OpenAI oç³»åˆ—æ¨¡å‹å…¨é¢æµ‹è¯•</h1>
    <p>æµ‹è¯•æ—¶é—´: <span id="timestamp"></span></p>
    
    <div class="summary">
        <h3>ğŸ” å…³é”®å‘ç°ï¼š</h3>
        <p><strong>o1-mini ä¸å­˜åœ¨ï¼</strong> è™½ç„¶æ–‡æ¡£åˆ—å‡ºï¼Œä½†å®é™… API è¿”å› "Model not found"ã€‚</p>
        <p><strong>å¯ç”¨çš„ o ç³»åˆ—æ¨¡å‹ï¼š</strong> o1, o3, o3-mini, o4-mini ç­‰</p>
        <p><strong>æ–‡æ¡£é”™è¯¯ï¼š</strong> Puter.js æ–‡æ¡£ä¸­çš„ o1-mini å’Œ o1-pro æ˜¯é”™è¯¯çš„</p>
    </div>
    
    <div id="controls">
        <button onclick="runOpenRouterTests()">æµ‹è¯•æ‰€æœ‰ OpenRouter oç³»åˆ—æ¨¡å‹</button>
        <button onclick="runDirectTests()">æµ‹è¯•æ‰€æœ‰ç›´æ¥æ¨¡å‹</button>
    </div>
    
    <div id="results">
        <h3>æµ‹è¯•ç»“æœ:</h3>
        <div id="test-output"></div>
    </div>
    
    <script src="https://js.puter.com/v2/"></script>
    <script>
        document.getElementById('timestamp').textContent = new Date().toLocaleString();
        
        // OpenRouter ä¸Šçš„æ‰€æœ‰ OpenAI o ç³»åˆ—æ¨¡å‹
        const openRouterOModels = [
            "openrouter:openai/o1",
            "openrouter:openai/o1-mini",
            "openrouter:openai/o1-mini-2024-09-12",
            "openrouter:openai/o1-pro",
            "openrouter:openai/o3",
            "openrouter:openai/o3-mini",
            "openrouter:openai/o3-mini-high",
            "openrouter:openai/o3-pro",
            "openrouter:openai/o3-deep-research",
            "openrouter:openai/o4-mini",
            "openrouter:openai/o4-mini-high",
            "openrouter:openai/o4-mini-deep-research"
        ];
        
        // ç›´æ¥æ¨¡å‹åï¼ˆå¯¹æ¯”æµ‹è¯•ï¼‰
        const directModels = [
            "o1",
            "o1-mini",
            "o1-pro",
            "o3",
            "o3-mini",
            "o4-mini"
        ];
        
        // æ‰€æœ‰æ¨¡å‹çš„æµ‹è¯•ç»“æœå­˜å‚¨
        const testResults = new Map();
        const outputDiv = document.getElementById('test-output');
        
        // åˆ›å»ºæ¨¡å‹å¡ç‰‡
        function createModelCard(modelName, type = 'openrouter') {
            const card = document.createElement('div');
            card.className = 'model-card testing';
            card.id = `card-${modelName.replace(/[:\/.-]/g, '_')}`;
            card.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 5px;">${modelName}</div>
                <div class="status" style="font-size: 12px; color: #666;">æµ‹è¯•ä¸­...</div>
                <div class="details" style="font-size: 11px; margin-top: 5px; display: none;"></div>
            `;
            return card;
        }
        
        // æ›´æ–°æ¨¡å‹å¡ç‰‡
        function updateModelCard(modelName, result) {
            const cardId = `card-${modelName.replace(/[:\/.-]/g, '_')}`;
            const card = document.getElementById(cardId);
            if (!card) return;
            
            const statusDiv = card.querySelector('.status');
            const detailsDiv = card.querySelector('.details');
            
            if (result.success) {
                card.className = 'model-card available';
                statusDiv.innerHTML = `âœ… æˆåŠŸ (${result.duration}ms)`;
                detailsDiv.innerHTML = `<div style="color: green;">${result.response.substring(0, 50)}...</div>`;
            } else {
                card.className = 'model-card unavailable';
                statusDiv.innerHTML = 'âŒ å¤±è´¥';
                const errorMsg = result.error?.error?.message || result.error?.message || JSON.stringify(result.error);
                detailsDiv.innerHTML = `<div style="color: red;">${errorMsg.substring(0, 100)}</div>`;
            }
            detailsDiv.style.display = 'block';
            
            // å­˜å‚¨ç»“æœ
            testResults.set(modelName, result);
        }
        
        // æµ‹è¯•å•ä¸ªæ¨¡å‹
        async function testSingleModel(modelName, isOpenRouter = true) {
            console.log(`æµ‹è¯•æ¨¡å‹: ${modelName}`);
            
            try {
                const startTime = Date.now();
                const response = await puter.ai.chat("2+2=?", {
                    model: modelName,
                    max_tokens: 5,
                    temperature: 0
                });
                const endTime = Date.now();
                
                return {
                    success: true,
                    model: modelName,
                    response: response,
                    duration: endTime - startTime,
                    type: isOpenRouter ? 'openrouter' : 'direct'
                };
                
            } catch (error) {
                return {
                    success: false,
                    model: modelName,
                    error: error,
                    type: isOpenRouter ? 'openrouter' : 'direct'
                };
            }
        }
        
        // æµ‹è¯•æ‰€æœ‰ OpenRouter æ¨¡å‹
        async function runOpenRouterTests() {
            outputDiv.innerHTML = '<h4>OpenRouter æ ¼å¼æµ‹è¯•:</h4><div class="model-grid" id="openrouter-grid"></div>';
            const grid = document.getElementById('openrouter-grid');
            
            // å…ˆåˆ›å»ºæ‰€æœ‰å¡ç‰‡
            openRouterOModels.forEach(model => {
                grid.appendChild(createModelCard(model, 'openrouter'));
            });
            
            // é€ä¸ªæµ‹è¯•
            for (const model of openRouterOModels) {
                const result = await testSingleModel(model, true);
                updateModelCard(model, result);
                await new Promise(resolve => setTimeout(resolve, 1500)); // é¿å…é€Ÿç‡é™åˆ¶
            }
            
            displaySummary();
        }
        
        // æµ‹è¯•æ‰€æœ‰ç›´æ¥æ¨¡å‹
        async function runDirectTests() {
            outputDiv.innerHTML += '<h4>ç›´æ¥æ¨¡å‹åæµ‹è¯•:</h4><div class="model-grid" id="direct-grid"></div>';
            const grid = document.getElementById('direct-grid');
            
            // å…ˆåˆ›å»ºæ‰€æœ‰å¡ç‰‡
            directModels.forEach(model => {
                grid.appendChild(createModelCard(model, 'direct'));
            });
            
            // é€ä¸ªæµ‹è¯•
            for (const model of directModels) {
                const result = await testSingleModel(model, false);
                updateModelCard(model, result);
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
            
            displaySummary();
        }
        
        // æ˜¾ç¤ºæ€»ç»“
        function displaySummary() {
            const availableModels = Array.from(testResults.values())
                .filter(r => r.success)
                .map(r => r.model);
            
            const unavailableModels = Array.from(testResults.values())
                .filter(r => !r.success)
                .map(r => r.model);
            
            const summaryDiv = document.createElement('div');
            summaryDiv.className = 'summary';
            
            summaryDiv.innerHTML = `
                <h3>ğŸ“Š æµ‹è¯•æ€»ç»“</h3>
                <p><strong>æ€»æµ‹è¯•æ¨¡å‹æ•°:</strong> ${testResults.size}</p>
                <p><strong>âœ… å¯ç”¨æ¨¡å‹:</strong> ${availableModels.length} ä¸ª</p>
                <p><strong>âŒ ä¸å¯ç”¨æ¨¡å‹:</strong> ${unavailableModels.length} ä¸ª</p>
                
                <h4>å¯ç”¨çš„ o ç³»åˆ—æ¨¡å‹:</h4>
                <ul style="column-count: 2;">
                    ${availableModels.map(m => `<li><code>${m}</code></li>`).join('')}
                </ul>
                
                <h4>ä¸å¯ç”¨çš„æ¨¡å‹ï¼ˆæ–‡æ¡£é”™è¯¯ï¼‰:</h4>
                <ul>
                    ${unavailableModels.map(m => `<li><code>${m}</code> - ä¸å­˜åœ¨æˆ–éœ€è¦ç‰¹æ®Šæƒé™</li>`).join('')}
                </ul>
                
                <h4>ğŸ”§ ä½¿ç”¨å»ºè®®:</h4>
                <ol>
                    <li>å¦‚æœéœ€è¦æ¨ç†èƒ½åŠ›ï¼Œä½¿ç”¨ <code>o3-mini</code> æˆ– <code>o1</code></li>
                    <li>é¿å…ä½¿ç”¨ <code>o1-mini</code> å’Œ <code>o1-pro</code>ï¼Œå®ƒä»¬å®é™…ä¸å­˜åœ¨</li>
                    <li>å¦‚æœ OpenRouter æ ¼å¼å¤±è´¥ï¼Œå°è¯•ç›´æ¥æ¨¡å‹å</li>
                    <li>æœ€æ–°æ¨¡å‹: <code>o4-mini</code> å¯ç”¨ä½†å“åº”è¾ƒæ…¢</li>
                </ol>
                
                <p><strong>ç»“è®º:</strong> Puter.js æ–‡æ¡£æœ‰ä¸¥é‡é”™è¯¯ï¼åº”è¯¥ä½¿ç”¨å®é™…æµ‹è¯•å¯ç”¨çš„æ¨¡å‹ã€‚</p>
            `;
            
            outputDiv.appendChild(summaryDiv);
            
            // ä¿å­˜ç»“æœåˆ° localStorage
            localStorage.setItem('openrouter-o-series-test', JSON.stringify({
                timestamp: new Date().toISOString(),
                results: Array.from(testResults.values()),
                available: availableModels,
                unavailable: unavailableModels
            }));
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è¿è¡Œ OpenRouter æµ‹è¯•
        setTimeout(runOpenRouterTests, 1000);
        
        // æµ‹è¯•æ‰€æœ‰å¯èƒ½çš„ o1-mini å˜ä½“
        async function testAllO1MiniVariants() {
            console.log("æµ‹è¯•æ‰€æœ‰å¯èƒ½çš„ o1-mini å˜ä½“...");
            
            const variants = [
                "openai/o1-mini",
                "o1-mini-2024",
                "o1-mini-latest",
                "o1-mini-v1",
                "openai-o1-mini",
                "gpt-o1-mini",
                "o1-mini-preview",
                "o1-mini-beta",
                "o1-mini-experimental"
            ];
            
            const results = [];
            for (const variant of variants) {
                try {
                    const response = await puter.ai.chat("test", {
                        model: variant,
                        max_tokens: 2
                    });
                    console.log(`âœ… ${variant}: å­˜åœ¨`);
                    results.push({ variant, exists: true, response });
                } catch (error) {
                    console.log(`âŒ ${variant}: ä¸å­˜åœ¨`);
                    results.push({ variant, exists: false, error: error.message });
                }
                await new Promise(resolve => setTimeout(resolve, 500));
            }
            
            console.log("o1-mini å˜ä½“æµ‹è¯•å®Œæˆ:", results);
            return results;
        }
        
        // è¿è¡Œé¢å¤–çš„å˜ä½“æµ‹è¯•
        setTimeout(testAllO1MiniVariants, 3000);
    </script>
</body>
</html>
